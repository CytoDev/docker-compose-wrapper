#!/usr/bin/env bash

set -e;

TARGET="/mnt/data/${1}";
NAME="/var/www/${2}";

[[ -L "${NAME}" ]] && exit 0;

if [[ ! -d "${TARGET}" ]]; then
    echo "Target '${TARGET}' does not exist" &> /dev/stderr;

    exit 1;
fi

if ! ln -s "${TARGET}" "${NAME}" 2> /dev/stderr; then
    echo "Unable to link '${TARGET}' to '${NAME}'" &> /dev/stderr;
fi

exit 0;
